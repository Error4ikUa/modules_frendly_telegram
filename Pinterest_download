from .. import loader, utils
import asyncio

class PintrMod(loader.Module):
    strings = {"name": "Pintr"}

    async def client_ready(self, client, db):
        self.client = client

    async def pintrcmd(self, message):
        args = utils.get_args_raw(message)
        if not args:
            await message.edit("❌ Вкажіть посилання.")
            return

        bot_entity = "@TopSaverBot"
        await message.edit("⏳ Очікуємо відео, о господи оце в тебе цицьки....")
        await self.client.send_message(bot_entity, args)

        await asyncio.sleep(5) 

        async for response in self.client.iter_messages(bot_entity, limit=5):
            if response.video: 
                await message.respond(file=response.video)
                await message.delete()
                return

        await message.edit("⚠️ Не вдалося знайти відео.")
